* Quickpay Change Log
=====================


### 1.2.2 - 2015-10-16




### 1.2.1 - 2015-10-16

* 报表下载页面的查询与下载链接都加上集团代码的过滤条件


### 1.2.0 - 2015-10-16

* 优化密码加密策略
* 交易列表查看交易明细的事件在订单号上
* app清算信息更新接口补充
* 登入页面flex布局
* js 尽可能标准
* 优化,创建门店时接口权限默认为空，门店状态默认是正常门店
* 登录页面字体
* 优化登录页面
* 扫码支付列表的报文展示优化
* paper-toast必须浮动在最上层
* 去掉绑定支付的交易列表双击行的事件，不存在
* 优化，必填项为空时不能提交成功
* 优化会话时间配置
* 详情弹窗体验修改
* 扫码交易查询的用户体验优化
* 扫码支付交易查询的页面交易状态为关闭能够显示关闭原因，退款列中非退款的不显示
* 创建用户，查看，修改用户信息，修改密码
* 去掉...，异步消息打印状态码
* 压缩时排除-min.js
* iron-ajax修改成x-ajax
* 删除不用的元素
* 自定义x-ajax和x-form来监听ajax出错，请做出处理
* 进入全屏模式的配置
* 修复admin用户没有权限的bug
* 授权判断优化，加上不用授权的地址以及未授权跳转到404
* 使用iron-localstorage来存储登入信息
* 登入页面组件化以及一些页面优化
* 404页面优化
* 优化session，session快过期时，延长session有效期
* noutFountPage修改
* go日志插件使用omigo/log
* 修改菜单
* 端口改为5800
* x-select的展开动画
* 交易查询等页面的商户改成门店
* 查询一个应答码的详细信息的api
* 绑定支付交易列表的应答码鼠标悬浮显示错误信息
* 用户权限管理


### 1.1.4 - 2015-10-15

* 加入四类用户角色管理
* 批导修改更灵活
* 压缩时排除已经压缩的文件
* 删除渠道中有关费率的代码
* 修复微信商品信息长度过长的bug
* 修改查询条件中paper-input间距为15px
* 路由添加清算标识和清算角色
* 批导时限制签名密钥为32位
* 修改左边菜单名为‘云收银管理平台’
* 删除无用包


### 1.1.3 - 2015-10-15

* 清算报表金额减去手续费
* 调试接口关闭
* 清算报表记录状态
* 配置文件中的数据库密码加密
* 发布时使用 killall 杀进程，避免匹配错误
* 日志中不打印密码
* 文件上传不同环境对应不同空间
* 批导列数报错信息更完善，扫码接口交易打上清算角色
* 丰富excel样式


### 1.1.2 - 2015-10-13

* 平台名称改为 云收银管理平台
* 貌似 git hooks 脚本不支持中文？
* 发布时，排除 demo/test/examples 等
* 升级 paper-ripple ，避免safari 双击的bug
* 退款类型处理
* 修复没有解锁的bug
* 保存路由的时增加限制，如果merId不存在，则保存失败。
* 发布时，前端不打包
* 代理添加微信成本和支付宝成本
* 集团商户改为 商户，商户 改为门店，二级代理改成公司
* 修改报表文件名
* 补充应答码
* 企业付款返回 system_error 后以相同的参数重试
* 定时生成清算报表
* 在扫码路由上添加清算标识
* 修复商户变更失败的 bug
* 微信通知偶尔返回转义后的 xml ，需要解转义
* 去除多余日志


### 1.1.1 - 2015-10-09

* 企业付款返回 system_error，但实际上支付成功，尝试过一段时间再查询
* 线下联机需要传 transationid
* 对账接口


### 1.1.0 - 2015-10-09

* 快捷支付（绑定支付、ApplePay、无卡直接支付）市场模式上线
* 云收银 App 用户接口上线
* 公众号支付上线
* 使用paper-submenu代替iron-collapse
* 修复在safari和firefox浏览器下点击菜单需要两次才能打开新页面的bug
* 快捷支付添加渠道‘CIL’
* 修改点击新页面的时候菜单会折叠后再打开的bug
* 扫码币种传 CNY not 156
* 修复进入查看某商户的路由列表报错的bug
* 修复编辑机构商户的时候路由不能跳转的bug
* 重试3次后回成功
* 去除多余样式
* 企业付款重试
* 前端暂时不打包不压缩
* 简化日志格式
* 按时间升序排列
* 优化商户签名密钥随机生成策略
* 修改线下联机生产环境配置
* 修复自定义元素重名的bug
* 微信支付上送商品标识字段
* 内部测试菜单下的各项子菜单都对应一个page页面
* 交易查询菜单下各个子菜单对应一个page页面
* 异步通知接口日志落地
* 绑定支付菜单下每个菜单创建独立的page页面
* 优化报表下载功能，分页添加到首页和到最后一页
* 扫码支付商户配置菜单列的每一项菜单对应一个page页面
* approuter改造
* 完成应用组件化以及页面title变化
* 隔天退款配置化
* 放开报表统计两个日期，可以选时间段
* 用 13 号字体
* safari 下日历不显示，控件退回到老版本


### 1.0.8 - 2015-09-30

* Ping++ 商户要求在加长超时时间，由现在的 40m 分钟改为 1 天
* 预下单超时改为 40m
* 订单明细
* 费率如果是0，就显示是0
* 记录交易报文
* 报表下载界面去掉日期区间，只留一个日期
* 修复交易统计汇总行字段对应错误
* 发布时排除其他环境配置
* 将on-click改成on-tap
* 对密钥显示进行掩码处理，对商户添加更新接口
* 代码优化，定时关闭09应答
* 优化绑定支付页面样式
* 查询关联订单接口
* 对扫码交易详情页重新布局
* 扫码交易列表字段显示顺序调整，按更新时间降序排列，应答码上提示
* 点击序号列可以查看详情
* 前端查询时,扫码支付和快捷支付只能查到其对应的数据
* 提交前如果更新失败，提示，然后退出
* 优化绑定支付交易查询
* 调整渠道商户明细样式
* 快捷支付下机构商户删除无用字段，渠道商户删除微信和支付宝
* 未知应答时使用渠道应答


### 1.0.7 - 2015-09-30

* 修改支付宝预下单超时时间


### 1.0.6 - 2015-09-22

* fix: 异步消息通知不应该返回 openid，而应该返回 sub_openid
* 绑定支付查询页面
* 云收银对账接口优化
* QYFK => QYZF
* 公众号支付商品详细没有入库
* 商品名称兼容


### 1.0.5 - 2015-09-21

* 交易查询支持多个交易状态
* 企业付款接口名改为企业支付
* 异步通知前每次都验证订单状态
* 创建商户时，设置agentCode，agentName，permission
* 线下连接加密
* 添加app接口单元测试
* 云收银app接口
* 清算信息相关接口
* 更新七牛 https 上传地址
* 支付宝代理添加‘天奕通 11719712a1’，微信代理目前只有一个讯联
* 发送激活链接接口，激活接口
* 统一验签
* 邮件发送整理
* 新增商户时生成一个商户的 uniqueId，还有页面新增两个字段 titleOne, titleTwo
* 结算接口加密
* 中金 HTTPs 是单向的
* 支付结算测试页面
* 绑定支付结算接口


### 1.0.4 - 2015-09-12

* 解决 DNS 解析导致交易慢的问题，目前的方案是预先解析出域名对应的 IP，并定时刷新
* 线下切换为短连接
* 市场模式渠道接口


### 1.0.3 - 2015-09-09

* 代理接入扫码支付
* fix: 如果没有证书，显示 undefined
* fix: 不能上传证书
* 增加二级代理管理页面
* 补充微信 $ 字段
* fix: 商户如果有优惠，微信会自动折扣，多一个字段，造成系统签名失败
* 修复扫固定码bug
* 扫固定码查询订单接口
* 扫固定码获取用户信息接口
* 页面样式优化
* 微信请求时间加入info日志中


### 1.0.2 - 2015-09-06

* 修复退款、撤销、取消可能出现查找交易时，该交易还没被正确更新的bug
* 统一页面样式
* 放开外卡直接支付
* 加入异步通知日志


### 1.0.1 - 2015-09-01

* 优化页面样式，分页样式
* 扫码支付和绑定支付分开
* 商户保存后刷新页面，路由保存后刷新页面
* 异步通知消息格式更改
* 修改分页组件样式
* 不验证机构号
* 修复交易时间排序的bug
* 快捷支付获取卡片信息接口
* 添加绑定支付测试页面
* 调整商户录入页面布局
* 交易增加查询字段
* 字体统一成 14px
* 商户录入对必填项做控制
* 原订单应答码不覆盖，手续费计算


### 1.0.0 - 2015-08-21

* 支付接口支付宝、微信扫码支付（包含下单和预下单）
* 支付接口微信公众号支付
* 支付接口微信企业付款
* HTTP 接口、TCP UTF-8 接口、TCP GBK 接口
* 管理平台配置代理、集团商户、商户、微信、支付宝
* 管理平台交易查询、下载
* 管理平台统计报表（新系统可下载报表）
* 新旧系统迁移、数据迁移


### 0.9.1 - 2015-06-15

* 统一使用 JSON 作为配置文件


### 0.9.0 - 2015-03-28

* 生产环境发布的第一个版本，支持绑定支付、ApplePay、无卡直接支付
