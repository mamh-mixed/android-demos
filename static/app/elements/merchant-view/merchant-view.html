<!--
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
-->

<link rel="import" href="../../bower_components/polymer/polymer.html">

<dom-module id="merchant-view">
  <template>

    <style>
      :host {
        display: block;
        --paper-dialog-scrollable: {
          min-width: 600px;
          min-height: 450px;
          font-size: 15px;
        }
      }

      paper-dialog {
        background-color: #ffffff;
        height:85%;
      }

      paper-dialog > *:first-child {
         margin-top:0px;
      }

      .row {
        @apply(--layout-horizontal);
      }

      .row iron-icon {
        color: red;
      }

      paper-icon-button.red:hover {
        background:#CD4F39;
        border-radius: 0%;
      }
      .header{
          padding:0px;
          margin:0px;
          background:red;
          color:#ffffff;
          heigth:40px;
          line-height:40px;
          font-weight:bold;
          font-size:16px;
      }
    </style>

    <paper-dialog id="dialogView">
      <div class="header">
         <paper-icon-button icon="clear" alt="clear" style="width:40px;text-align:center;" class="red" on-tap="handleClose"></paper-icon-button>
          查看机构商户信息
      </div>
      <paper-dialog-scrollable>
        <div>
          <dl>
            <dt>商户编号:</dt>
            <dd>
              <span>{{item.merId}}</span>
            </dd>
            <dt>商户名称:</dt>
            <dd>
              <span>{{item.detail.merName}}</span>
            </dd>
            <dt>代理编号:</dt>
            <dd>
              <span>{{item.agentCode}}</span>
            </dd>
            <dt>代理名称:</dt>
            <dd>
              <span>{{item.agentName}}</span>
            </dd>

            <dt>集团商户编码:</dt>
            <dd>
              <span>{{item.groupCode}}</span>
            </dd>
            <dt>集团商户名称:</dt>
            <dd>
              <span>{{item.groupName}}</span>
            </dd>

            <dt>交易币种:</dt>
            <dd>
              <span>{{item.transCurr}}</span>
            </dd>

            <dt>商户状态:</dt>
            <dd>
              <span>{{item.merStatus}}</span>
            </dd>

            <dt>接口授权:</dt>
            <dd>
              <span>{{_computePermissions(item.permission)}}</span>
            </dd>
            <dt>备注:</dt>
            <dd>
              <span>{{item.remark}}</span>
            </dd>
            <dt>是否需要验签:</dt>
            <dd>
              <span>{{_computeYesOrNo(item.isNeedSign)}}</span>
            </dd>

            <dt>签名密钥:</dt>
            <dd>
              <span>{{item.signKey}}</span>
            </dd>

            <dt>加密密钥:</dt>
            <dd>
              <span>{{item.encryptKey}}</span>
            </dd>

            <dt>品牌编号:</dt>
            <dd>
              <span>{{item.detail.brandNum}}</span>
            </dd>

            <dt>门店ID:</dt>
            <dd>
              <span>{{item.detail.shopID}}</span>
            </dd>

            <dt>门店类型:</dt>
            <dd>
              <span>{{item.detail.shopType}}</span>
            </dd>

          </dl>
        </div>
        <paper-dialog-scrollable>
    </paper-dialog>

  </template>
  <script>
    (function() {
      'use strict';

      Polymer({
        is: 'merchant-view',

        properties: {
          foo: {
            type: String,
            value: 'merchant-view',
            notify: true
          },
          permissionArray: {
            type: Array,
            value: [{
              key: 'PURC',
              value: '下单支付'
            }, {
              key: 'PAUT',
              value: '预下单'
            }, {
              key: 'QYFK',
              value: '企业付款'
            }, {
              key: 'JSZF',
              value: '公众号支付'
            }, {
              key: 'INQY',
              value: '查询订单'
            }, {
              key: 'VOID',
              value: '撤销'
            }, {
              key: 'REFD',
              value: '退款'
            }, {
              key: 'CANC',
              value: '关单'
            }]
          },
          item: Object,
        },
        open: function() {
          this.$.dialogView.open();
        },
        _computePermissions: function(permissions) {
          var map = {};
          for (var i = 0, l = this.permissionArray.length; i < l; i++) {
            var item = this.permissionArray[i];
            map[item.key] = item.value;
          }

          if (!permissions) {
            return '';
          }

          var permissionCN = permissions.map(function(value) {
            return map[value];
          });
          return permissionCN.join(',');
        },
        _computeYesOrNo: function(flag) {
          if (flag) {
            return '是';
          }
          return '否';
        },
        // 关闭事件
        handleClose:function(){
            this.$.dialogView.close();
        }
      });
    })();
  </script>
</dom-module>
